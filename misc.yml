---

# Gnome Settings
- name: set gsettings
  become: false
  command: "gsettings set {{ item }}"
  with_items: "{{ gnome_settings }}"
  register: result
  failed_when:
    - result.rc != 0
  vars:
    cond: "{{ set_gsettings }}"
  when: cond

- name: open gnome online accounts
  command: "gnome-control-center"

- name: "open firefox app-password sites"
  become: false
  command: "firefox {{ item }}"
  with_items: "{{ firefox_app_passwords }}"
  register: result
  failed_when:
    - result.rc != 0
  vars:
    cond: "{{ firefox_enable }}"
  when: cond

- name: "open bitwarden"
  become: false
  command: "bitwarden"

# Firefox Addons
- name: "open firefox addon pages"
  become: false
  command: "firefox --new-window https://addons.mozilla.org/en-US/firefox/addon/{{ item }}/"
  with_items: "{{ firefox_addons }}"
  register: result
  failed_when:
    - result.rc != 0
  vars:
    cond: "{{ firefox_enable }}"
  when: cond

- name: set fish welcome message
  replace:
    path: "~/.config/fish/fish_variables"
    after: 'fish_greeting:'
    replace: "{{ fish_greeting }}"
    regexp: '[^#\n]'

- name: download minetime appimage
  get_url:
    url: "{{ minetime_url }}"
    dest: "/home/{{ user }}/Downloads/MineTime.AppImage"
    mode: "0770"
  vars:
    cond: "{{ minetime_install }}"
  when: cond
